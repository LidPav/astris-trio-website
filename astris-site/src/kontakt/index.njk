---
layout: layout.njk
title: Kontakt
description: Booking & Kontakt
---

<h1 class="h1">Kontakt</h1>
<p class="lead">Für Konzertanfragen, Programme und Pressematerial freuen wir uns über eine Nachricht.</p>

<div class="grid">

  <!-- Karte 1: Kontakt / E-Mail -->
  <div class="card">
    <h2 class="h2">Kontakt</h2>
    <p class="small">
      E‑Mail:
      <a
        href="mailto:{{ site.email | replace('@', '&#64;') | replace('.', '&#46;') }}?subject={{ 'Anfrage Astris Trio' | urlencode }}&amp;body={{ 'Hallo,' | urlencode }}"
      >
        {{ site.email }}
      </a>
    </p>
  </div>

  <!-- Karte 2: Kontaktformular (Formspree) -->
  <div class="card">
    <h2 class="h2">Kontaktformular</h2>
    <form class="form" action="https://formspree.io/f/meelkjon" method="POST" accept-charset="UTF-8">
      <!-- Zeitstempel (für Zeit-basierte Erkennung) -->
      <input type="hidden" id="form_start_time" name="form_start_time" value="">

      <!-- Honeypot gegen Spam (unsichtbar für Menschen) -->
      <p class="visually-hidden" aria-hidden="true">
        <label for="website">Website (leer lassen)</label>
        <input id="website" name="website" type="text" tabindex="-1" autocomplete="off" />
      </p>

      <div class="form-row">
        <label for="name">Name<span aria-hidden="true">*</span></label>
        <input id="name" name="name" type="text" required autocomplete="name" placeholder="Ihr Name" aria-required="true" />
      </div>

      <div class="form-row">
        <label for="email">E‑Mail<span aria-hidden="true">*</span></label>
        <input id="email" name="email" type="email" required autocomplete="email" placeholder="name@example.com" aria-required="true" />
      </div>

      <div class="form-row">
        <label for="subject">Betreff</label>
        <input id="subject" name="subject" type="text" placeholder="Betreff (optional)" />
      </div>

      <div class="form-row">
        <label for="message">Nachricht<span aria-hidden="true">*</span></label>
        <textarea id="message" name="message" rows="6" required placeholder="Ihre Nachricht" aria-required="true"></textarea>
      </div>

      <!-- Meta für Formspree -->
      <input type="hidden" name="_subject" value="Kontakt Astris Trio" />
      <input type="hidden" name="_language" value="de" />
      <!-- Optional: Redirect nach Erfolg -->
      <!-- <input type="hidden" name="_next" value="/danke/" /> -->

      <button type="submit" class="btn">Nachricht senden</button>

      <p class="form-privacy small">
        Mit dem Absenden stimmen Sie zu, dass wir Ihre Angaben zur Beantwortung Ihrer Anfrage verarbeiten.
        Details in unserer <a href="/datenschutz/">Datenschutzerklärung</a>.
      </p>
    </form>
  </div>

</div> <!-- /grid -->

<script>
// Zeitstempel setzen, wenn die Seite geladen ist
window.addEventListener("DOMContentLoaded", function () {
  var startField = document.getElementById("form_start_time");
  if (startField) {
    startField.value = Date.now(); // Startzeit speichern
  }
});

// Zeit-basierte Erkennung + Honeypot vor dem Absenden
document.addEventListener("submit", function (e) {
  var form = e.target;
  if (!form.matches("form")) return;

  // Honeypot prüfen
  var honeypot = form.querySelector("input[name='website']");
  if (honeypot && honeypot.value) {
    e.preventDefault();
    console.warn("Spam blockiert (Honeypot).");
    return false;
  }

  // Zeitprüfung
  var startField = form.querySelector("#form_start_time");
  if (startField && startField.value) {
    var now = Date.now();
    var diff = now - parseInt(startField.value, 10);

    // Zu schnell? (< 3 Sekunden)
    if (diff < 3000) {
      e.preventDefault();
      console.warn("Spam blockiert (zu schnell ausgefüllt: " + diff + " ms)");
      // Optional: Fake-Erfolg oder Redirect:
      // alert("Danke! Ihre Nachricht wurde gesendet.");
      // window.location.href = "/danke/";
      return false;
    }
  }
}, true);
</script>
